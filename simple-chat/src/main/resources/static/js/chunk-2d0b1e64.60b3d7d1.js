(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b1e64"],{"228f":function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("van-cell-group",[t("van-field",{attrs:{required:"",clearable:"",size:"large",label:"用户手机",placeholder:"请输入用户手机号码",required:"","error-message":e.phoneErr},model:{value:e.vipOrderForm.phone,callback:function(r){e.$set(e.vipOrderForm,"phone",r)},expression:"vipOrderForm.phone"}}),t("van-field",{attrs:{label:"金额",clearable:"",size:"large",placeholder:"请输入密码",required:"","error-message":e.amountErr},model:{value:e.vipOrderForm.amount,callback:function(r){e.$set(e.vipOrderForm,"amount",r)},expression:"vipOrderForm.amount"}}),t("van-field",{attrs:{readonly:"",clickable:"",size:"large",label:"客服电话",value:e.vipOrderForm.servicePhone,placeholder:"选择客服电话",required:"","error-message":e.servicePhoneErr},on:{click:function(r){e.showServiceChoice=!0}}})],1),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showServiceChoice,callback:function(r){e.showServiceChoice=r},expression:"showServiceChoice"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.serviceList,"value-key":"phone"},on:{cancel:function(r){e.showServiceChoice=!1},confirm:e.handleServiceChoose}})],1),t("div",{staticStyle:{padding:"32px 16px"}},[t("van-button",{staticStyle:{width:"100%"},attrs:{round:"",type:"danger"},on:{click:e.onSubmit}},[e._v(e._s(e.isEdit?"更新":"创建"))]),t("van-button",{staticStyle:{width:"100%",margin:"10px 0 0 0"},attrs:{round:"",type:"default"},on:{click:e.onCancel}},[e._v("取消")])],1)],1)},i=[],a=(t("96cf"),t("3b8d")),o=t("2a95"),s=t("b775"),c=function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].post("/busi/vipOrder/add",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}(),u=function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].post("/busi/servicePhone/list",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}(),h={id:"",phone:"",amount:1e3,servicePhone:""},p={name:"Detail",props:{isEdit:{type:Boolean,default:!1}},data:function(){return{vipOrderForm:{id:"",phone:"",amount:1e3,servicePhone:""},phoneErr:"",amountErr:"",servicePhoneErr:"",rules:{phone:[{required:!0,message:"请输入手机号码"},{pattern:/^\d+$/,message:"手机格式不正确"}],amount:[{required:!0,message:"请输入金额"},{pattern:/^\d+$/,message:"金额必须为数字值"}],servicePhone:[{required:!0,message:"请选择正确的客服号码"},{pattern:/^\d+$/,message:"手机格式不正确"}]},serviceList:[],showServiceChoice:!1}},methods:{handleServiceChoose:function(e){this.vipOrderForm.servicePhone=e.phone,this.showServiceChoice=!1},fetchServicePhoneList:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var r,t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({pageNo:1,pageSize:1e3,status:1});case 3:r=e.sent,t=r.data,n=t.list,t.totalCount,this.serviceList=n,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function r(){return e.apply(this,arguments)}return r}(),resetErr:function(){this.phoneErr="",this.amountErr="",this.servicePhoneErr=""},handleErrors:function(e,r){for(var t in e)"phone"===e[t].field&&(this.phoneErr=e[t].message),"amount"===e[t].field&&(this.amountErr=e[t].message),"servicePhone"===e[t].field&&(this.servicePhoneErr=e[t].message)},onSubmit:function(){var e=this,r=new o["a"](this.rules);r.validate(this.vipOrderForm,function(){var r=Object(a["a"])(regeneratorRuntime.mark(function r(t,n){return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(e.resetErr(),!t){r.next=4;break}return console.info(t),r.abrupt("return",e.handleErrors(t,n));case 4:e.$dialog.confirm({title:"提示",message:"订单创建成功后将直接打款[".concat(e.vipOrderForm.amount,"]到用户手机号[").concat(e.vipOrderForm.phone,"],无法修改和撤回,请确认无误后再操作, 是否继续?")}).then(Object(a["a"])(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,c(e.vipOrderForm);case 2:e.$notify({type:"success",message:"充值成功!"}),Object.assign(e.vipOrderForm,h);case 4:case"end":return r.stop()}},r)}))).catch(function(){});case 5:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}()).catch(function(){return console.log("promise catch err")})},onCancel:function(){},fetchData:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.form=Object.assign({},h);case 1:case"end":return e.stop()}},e,this)}));function r(r){return e.apply(this,arguments)}return r}()},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.fetchServicePhoneList(),!this.isEdit){e.next=7;break}return r=this.$route.params&&this.$route.params.id,e.next=5,this.fetchData(r);case 5:e.next=8;break;case 7:this.form=Object.assign({},h);case 8:case"end":return e.stop()}},e,this)}));function r(){return e.apply(this,arguments)}return r}()},l=p,d=t("2877"),m=Object(d["a"])(l,n,i,!1,null,null,null);r["default"]=m.exports}}]);